# Apache Airflow

This documentation provides a step-by-step guide to setting up a Vagrant environment for a financial data warehouse using Apache Airflow DAG framework. The goal is to collect and analyze daily open, high, low, close, and volume data of a specific stock. Second-accurate data can also be computed via an optional argument.

## Prerequisites

```
vagrant
virtualbox
```

## Setup

```
git clone --recursive https://gitlab.engr.illinois.edu/ie421_high_frequency_trading_spring_2023/ie421_hft_spring_2023_group_03/group_03_project.git
cd group_03_project/airflow
vagrant up
```

Browse to [localhost:8080](http://localhost:8080) and use the WebUI to trigger the `download-and-parse-iex-pcaps` DAG. The login username is `admin` and password is `admin` as well. And the resulting data csv will be stored in the current directory.

## Example

`20230510_candle_chart.csv`:
```
SYMBOL,OPEN,HIGH,LOW,CLOSE,VOLUME
SPY,413.79,414.525,408.88,412.87,1426892
```
`20230510_secs.csv`:
```
TIME,SYMBOL,OPEN,HIGH,LOW,CLOSE,VOLUME
2023-05-10 13:25:02,SPY,413.79,413.79,413.79,413.79,500
2023-05-10 13:25:36,SPY,413.77,413.77,413.77,413.77,500
2023-05-10 13:30:00,SPY,413.88,413.88,413.88,413.88,200
2023-05-10 13:30:01,SPY,413.85,413.875,413.845,413.865,354
2023-05-10 13:30:02,SPY,413.9,413.9,413.89,413.89,219
2023-05-10 13:30:03,SPY,413.94,413.95,413.915,413.915,733
2023-05-10 13:30:04,SPY,413.9,413.91,413.9,413.9,500
2023-05-10 13:30:05,SPY,413.9,413.9,413.9,413.9,200
2023-05-10 13:30:06,SPY,413.88,413.89,413.87,413.87,300
2023-05-10 13:30:07,SPY,413.88,413.88,413.88,413.88,100
2023-05-10 13:30:08,SPY,413.89,413.9,413.89,413.9,200
2023-05-10 13:30:09,SPY,413.875,413.875,413.875,413.875,100
2023-05-10 13:30:10,SPY,413.825,413.825,413.825,413.825,100
2023-05-10 13:30:11,SPY,413.805,413.805,413.805,413.805,100
2023-05-10 13:30:12,SPY,413.78,413.81,413.78,413.81,418
2023-05-10 13:30:13,SPY,413.815,413.82,413.815,413.815,500
2023-05-10 13:30:14,SPY,413.81,413.81,413.81,413.81,100
2023-05-10 13:30:15,SPY,413.825,413.825,413.825,413.825,100
2023-05-10 13:30:16,SPY,413.815,413.815,413.79,413.79,700
2023-05-10 13:30:22,SPY,413.79,413.79,413.79,413.79,100
2023-05-10 13:30:23,SPY,413.79,413.79,413.79,413.79,802
2023-05-10 13:30:24,SPY,413.84,413.87,413.84,413.84,258
2023-05-10 13:30:28,SPY,413.82,413.82,413.82,413.82,49
2023-05-10 13:30:29,SPY,413.845,413.845,413.845,413.845,100
2023-05-10 13:30:32,SPY,413.915,413.915,413.915,413.915,100
2023-05-10 13:30:34,SPY,413.915,413.915,413.915,413.915,1305
2023-05-10 13:30:37,SPY,413.945,413.945,413.945,413.945,5
2023-05-10 13:30:38,SPY,413.935,413.935,413.935,413.935,100
2023-05-10 13:30:39,SPY,413.94,413.945,413.935,413.945,300
2023-05-10 13:30:40,SPY,413.945,413.945,413.935,413.935,700
2023-05-10 13:30:41,SPY,413.925,413.935,413.925,413.925,800
2023-05-10 13:30:42,SPY,413.895,413.92,413.895,413.92,310
2023-05-10 13:30:44,SPY,413.95,413.98,413.95,413.98,2171
2023-05-10 13:30:45,SPY,414.03,414.03,414.03,414.03,509
2023-05-10 13:30:46,SPY,414.045,414.045,414.045,414.045,100
2023-05-10 13:30:48,SPY,414.03,414.035,414.03,414.035,200
2023-05-10 13:30:50,SPY,414.025,414.025,414.025,414.025,15
2023-05-10 13:30:57,SPY,414.025,414.025,414.025,414.025,100
2023-05-10 13:30:59,SPY,414.035,414.035,414.02,414.02,37
2023-05-10 13:31:00,SPY,414.02,414.04,414.02,414.04,568
2023-05-10 13:31:05,SPY,414.04,414.04,414.03,414.03,300
2023-05-10 13:31:06,SPY,414.05,414.075,414.05,414.075,615
2023-05-10 13:31:07,SPY,414.13,414.13,414.13,414.13,200
2023-05-10 13:31:08,SPY,414.14,414.15,414.14,414.15,300
2023-05-10 13:31:10,SPY,414.16,414.16,414.16,414.16,100
2023-05-10 13:31:11,SPY,414.135,414.135,414.135,414.135,20
2023-05-10 13:31:12,SPY,414.125,414.125,414.125,414.125,2
2023-05-10 13:31:13,SPY,414.16,414.165,414.16,414.16,500
2023-05-10 13:31:16,SPY,414.175,414.175,414.175,414.175,100
2023-05-10 13:31:18,SPY,414.185,414.185,414.185,414.185,105
2023-05-10 13:31:19,SPY,414.185,414.185,414.185,414.185,200
2023-05-10 13:31:20,SPY,414.16,414.16,414.16,414.16,5
2023-05-10 13:31:21,SPY,414.18,414.2,414.18,414.2,110
2023-05-10 13:31:25,SPY,414.22,414.22,414.22,414.22,10
2023-05-10 13:31:26,SPY,414.21,414.21,414.19,414.19,501
2023-05-10 13:31:37,SPY,414.38,414.38,414.38,414.38,2
2023-05-10 13:31:38,SPY,414.365,414.365,414.365,414.365,5
2023-05-10 13:31:39,SPY,414.365,414.365,414.365,414.365,5
2023-05-10 13:31:41,SPY,414.335,414.335,414.335,414.335,5
2023-05-10 13:31:43,SPY,414.295,414.295,414.295,414.295,7
2023-05-10 13:31:44,SPY,414.29,414.29,414.27,414.27,593
2023-05-10 13:31:47,SPY,414.265,414.265,414.265,414.265,10
2023-05-10 13:31:50,SPY,414.3,414.3,414.3,414.3,2
2023-05-10 13:31:52,SPY,414.315,414.32,414.315,414.32,120
2023-05-10 13:31:54,SPY,414.315,414.315,414.31,414.31,300
2023-05-10 13:31:55,SPY,414.355,414.355,414.355,414.355,500
2023-05-10 13:31:57,SPY,414.345,414.355,414.345,414.355,405
2023-05-10 13:31:59,SPY,414.355,414.355,414.355,414.355,5
...
```
